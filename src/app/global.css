@import 'tailwindcss';
@plugin "./hero";
@source "./**/*.{ts,tsx,mdx}" "../../content/**/*.{md,mdx}" "../../node_modules/@heroui/theme/dist/**/*.{js,ts,jsx,tsx}";
@custom-variant dark (&:is(.dark *));
@import 'fumadocs-ui/css/neutral.css';
@import 'fumadocs-ui/css/preset.css';
@import 'fumadocs-twoslash/twoslash.css';

@theme {
  --color-fd-primary: #6966EC;
  --color-primary: var(--color-fd-primary);
}

:root {
  /* 覆盖主色为 6966EC */
  --color-fd-primary: #6966EC;
  /* 新增：置顶按钮主色（与链接色一致） */
  --back-btn-color: #6866E4;
}

/* 返回按钮主题色（明暗适配） */
:root {
  --back-btn-bg: color-mix(in oklab, var(--back-btn-color) 86%, black 12%);
  --back-btn-hover-bg: color-mix(in oklab, var(--back-btn-color) 95%, white 5%);
  --back-btn-ring: color-mix(in oklab, var(--back-btn-color) 40%, transparent);
  --back-btn-text: #fff;
}
.dark {
  --back-btn-bg: color-mix(in oklab, var(--back-btn-color) 75%, black 25%);
  --back-btn-hover-bg: color-mix(in oklab, var(--back-btn-color) 85%, black 10%);
  --back-btn-ring: color-mix(in oklab, var(--back-btn-color) 50%, transparent);
  --back-btn-text: #fff;
}

/* 隐藏状态（在页面顶部或不可滚动时） */
.back-home-container.is-hidden { display: none; }

/* 将提示文案改为“返回顶部” */
.back-home-container .button::before { content: "返回顶部"; }

html { font-family: var(--app-sans); }
body { font-feature-settings: 'ss01' on, 'cv05' on; }

:root {
  --toc-accent: var(--color-fd-primary);
  --toc-rail: color-mix(in oklab, var(--color-fd-primary) 20%, transparent);
  /* 表头背景（固定为 #F1F1F1） */
  --table-header-bg: #F1F1F1;

  /* 返回首页按钮（可调色，不改动样式） */
  --back-btn-bg: color-mix(in oklab, var(--back-btn-color) 86%, black 12%);
  --back-btn-hover-bg: color-mix(in oklab, var(--back-btn-color) 65%, white 10%);
  --back-btn-ring: color-mix(in oklab, var(--back-btn-color) 40%, transparent);
  --back-btn-text: #fff;
}

/* 暗色模式下的表头背景，避免出现白底白字 */
.dark { --table-header-bg: color-mix(in oklab, white 8%, transparent); }

/* 暗色模式下优化按钮配色（不改变结构样式，仅颜色） */
.dark {
  --back-btn-bg: color-mix(in oklab, var(--back-btn-color) 80%, #000 20%);
  --back-btn-hover-bg: color-mix(in oklab, var(--back-btn-color) 70%, #000 20%);
  --back-btn-ring: color-mix(in oklab, var(--back-btn-color) 45%, transparent);
  --back-btn-text: #fff;
}

/* =============== Inline TOC 目录凹凸线条样式（恢复） =============== */
nav[aria-label="Table of contents"],
nav[aria-label="目录"] {
  --_toc-rail: var(--toc-rail);
  --_toc-accent: var(--toc-accent);
}

nav[aria-label="Table of contents"] ol,
nav[aria-label="目录"] ol {
  position: relative;
  margin-left: 12px;
  border-left: 1.5px solid var(--_toc-rail);
  padding-left: 0;
}

/* 二级目录：在自身也绘制竖线，并通过“弯折线”连接，形成阶梯凹凸效果 */
nav[aria-label="Table of contents"] ol ol,
nav[aria-label="目录"] ol ol {
  margin-left: 18px;
  border-left: 1.5px solid var(--_toc-rail);
}

nav[aria-label="Table of contents"] li,
nav[aria-label="目录"] li {
  list-style: none;
  position: relative;
  padding-left: 12px;
  margin: 8px 0;
}

/* 连接弯折线：仅对二级及以上层级 li 生效 */
nav[aria-label="Table of contents"] ol ol > li::after,
nav[aria-label="目录"] ol ol > li::after {
  content: '';
  position: absolute;
  left: -18px; /* 与上面 ol ol 的 margin-left 呼应 */
  top: 0.9em; /* 与圆点对齐 */
  width: 18px;
  height: 18px;
  border-top: 1.5px solid var(--_toc-rail);
  border-left: 1.5px solid var(--_toc-rail);
  border-top-left-radius: 10px; /* 圆角转弯，形成“凸起”的视觉 */
  transform: translateY(-50%);
}

nav[aria-label="Table of contents"] li::before,
nav[aria-label="目录"] li::before {
  content: '';
  position: absolute;
  left: -9px;
  top: 0.9em;
  transform: translateY(-50%);
  width: 8px;
  height: 8px;
  border-radius: 9999px;
  background: var(--_toc-accent);
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--_toc-accent) 12%, transparent);
}

nav[aria-label="Table of contents"] a,
nav[aria-label="目录"] a {
  display: inline-block;
  color: var(--fd-muted-foreground, color-mix(in oklab, #000 55%, transparent));
  text-decoration: none;
  padding: 2px 0;
}

nav[aria-label="Table of contents"] a:hover,
nav[aria-label="目录"] a:hover { color: var(--_toc-accent); }

nav[aria-label="Table of contents"] a[aria-current],
nav[aria-label="目录"] a[aria-current],
nav[aria-label="Table of contents"] a[aria-current="page"],
nav[aria-label="目录"] a[aria-current="page"],
nav[aria-label="Table of contents"] a[data-active="true"],
nav[aria-label="目录"] a[data-active="true"] {
  color: var(--_toc-accent);
  font-weight: 600;
}

/* =============== 表格样式 =============== */
/* 说明：Fumadocs Typography 默认使用 roundedTable，会给 table 设置灰色卡片背景。
   这里强制移除 table 背景，保留你指定的表头色（#F1F1F1），正文透明。*/

/* 去除容器灰背景（覆盖 roundedTable 的 table 背景） */
.prose table,
.fd-article table,
article table { background-color: transparent !important; background: none !important; }

/* 表头（或首行）灰色 + 加粗 */
.fd-article table thead th,
article.fd-article table thead th,
.prose table thead th,
article table thead th { font-weight: 700 !important; background-color: var(--table-header-bg) !important; }

/* 暗色模式下，确保表头文字颜色对比充分 */
.dark :is(.fd-article table thead th,
article.fd-article table thead th,
.prose table thead th,
article table thead th) { color: var(--fd-foreground, #fff) !important; }

/* 无 thead 时，将第一行视作表头 */
.fd-article table:not(:has(thead)) tr:first-child > th,
.fd-article table:not(:has(thead)) tr:first-child > td,
.prose table:not(:has(thead)) tr:first-child > th,
.prose table:not(:has(thead)) tr:first-child > td,
article table:not(:has(thead)) tr:first-child > th,
article table:not(:has(thead)) tr:first-child > td { font-weight: 700 !important; background-color: var(--table-header-bg) !important; }

/* 暗色模式下，首行视作表头时也保持足够的文字对比度 */
.dark :is(.fd-article table:not(:has(thead)) tr:first-child > th,
.fd-article table:not(:has(thead)) tr:first-child > td,
.prose table:not(:has(thead)) tr:first-child > th,
.prose table:not(:has(thead)) tr:first-child > td,
article table:not(:has(thead)) tr:first-child > th,
article table:not(:has(thead)) tr:first-child > td) { color: var(--fd-foreground, #fff) !important; }

/* 正文无背景 */
.fd-article table tbody tr,
.prose table tbody tr,
article table tbody tr { background-color: transparent !important; }

/* 兜底：清除单元格上的背景，避免第三方样式在 td 上着色 */
.fd-article table tbody td,
.prose table tbody td,
article table tbody td { background-color: transparent !important; }

/* 保持单元格内 strong/b 加粗不变 */
.fd-article table tbody tr td strong,
.fd-article table tbody tr td b,
.prose table tbody tr td b,
article table tbody tr td b,
article table tbody tr td strong,
article table tbody tr td strong {
  font-weight: 700 !important;
}

/* =============== 其他通用样式 =============== */
.animate-marquee {
  animation: marquee var(--marquee-duration, 40s) linear infinite;
}

.group:hover .animate-marquee {
  animation-play-state: paused;
}

@keyframes marquee {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-50%);
  }
}

@keyframes marquee_reverse {
  from {
    transform: translateX(-50%);
  }
  to {
    transform: translateX(0);
  }
}

/* Hide scrollbars for horizontal snapping containers on mobile */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar {
  -ms-overflow-style: none; /* IE/Edge */
  scrollbar-width: none;    /* Firefox */
}

/* Home page light-mode typography color overrides */
:root :is(main[data-home]) {
  /* Base text color */
  color: #1D1D1F;
}

/* Utility: gradient text with safe fallback */
.gradient-text { color: currentColor; }
@supports ((-webkit-background-clip: text) or (background-clip: text)) {
  .gradient-text {
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
  }
}

/* Stable gradient text utility to pair with bg-clip-text, used by HomePage */
.gradient-text-stable { color: currentColor; }
@supports ((-webkit-background-clip: text) or (background-clip: text)) {
  .gradient-text-stable {
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
  }
}
/* Prefer using this in conjunction with Tailwind bg-gradient-to-* utilities.
   We intentionally DO NOT set -webkit-text-fill-color: transparent to avoid
   fully transparent text in environments where background-clip fails. */

/* Ensure typical text utility variables align with this base where used by Fumadocs */
:root :is(main[data-home]) {
  --fd-foreground: #1D1D1F;
  --fd-card-foreground: #1D1D1F;
  --fd-muted-foreground: color-mix(in oklab, #1D1D1F 60%, transparent);
}

/* Do not affect dark mode */
.dark :is(main[data-home]) {
  color: inherit;
  --fd-foreground: inherit;
  --fd-card-foreground: inherit;
  --fd-muted-foreground: inherit;
}

/* =============== Markdown 列表样式 =============== */
/* 有序列表序号颜色 */
.prose ol > li::marker,
.fd-article ol > li::marker,
article ol > li::marker {
  color: #6966EC;
}

/* 无序列表符号颜色 */
.prose ul > li::marker,
.fd-article ul > li::marker,
article ul > li::marker {
  color: #6966EC;
}

/* 嵌套列表也应用相同样式 */
.prose ol ol > li::marker,
.prose ol ul > li::marker,
.prose ul ol > li::marker,
.prose ul ul > li::marker,
.fd-article ol ol > li::marker,
.fd-article ol ul > li::marker,
.fd-article ul ol > li::marker,
.fd-article ul ul > li::marker,
article ol ol > li::marker,
article ol ul > li::marker,
article ul ol > li::marker,
article ul ul > li::marker {
  color: #6966EC;
}

/* =============== Blockquote 引用样式 - 去除引号 =============== */
/* 覆盖 Fumadocs UI 预设的 blockquote 引号样式 */
.prose blockquote,
.fd-article blockquote,
article blockquote {
  quotes: none !important;
}

.prose blockquote::before,
.prose blockquote::after,
.fd-article blockquote::before,
.fd-article blockquote::after,
article blockquote::before,
article blockquote::after {
  content: none !important;
  display: none !important;
}

/* =============== 文档页面链接颜色统一（仅正文区域 .prose 内） =============== */
/* 文档正文中的链接，仅限 .prose，避免影响“上一篇/下一篇”等非正文卡片 */
.prose a,
.fd-article .prose a,
article .prose a {
  color: #6966EC !important;
}

.prose a:hover,
.fd-article .prose a:hover,
article .prose a:hover {
  color: #6966EC !important;
  opacity: 0.8;
}

/* 侧边栏链接颜色统一 */
[data-sidebar] a,
.fd-sidebar a,
nav[data-sidebar] a {
  color: inherit;
}

[data-sidebar] a:hover,
.fd-sidebar a:hover,
nav[data-sidebar] a:hover {
  color: #6966EC !important;
}

[data-sidebar] a[data-active="true"],
.fd-sidebar a[data-active="true"],
nav[data-sidebar] a[data-active="true"],
[data-sidebar] a[aria-current="page"],
.fd-sidebar a[aria-current="page"],
nav[data-sidebar] a[aria-current="page"] {
  color: #6966EC !important;
}

/* 侧边栏标签页链接 */
[data-sidebar-tabs] a,
.fd-sidebar-tabs a {
  color: inherit;
}

[data-sidebar-tabs] a:hover,
.fd-sidebar-tabs a:hover {
  color: #6966EC !important;
}

[data-sidebar-tabs] a[data-active="true"],
.fd-sidebar-tabs a[data-active="true"],
[data-sidebar-tabs] a[aria-current="page"],
.fd-sidebar-tabs a[aria-current="page"] {
  color: #6966EC !important;
}

/* 恢复：侧边栏标签页激活态的蓝色指示条（使用主色） */
[data-sidebar-tabs] a,
.fd-sidebar-tabs a { position: relative; padding-bottom: 6px; }

[data-sidebar-tabs] a::after,
.fd-sidebar-tabs a::after {
  content: '';
  position: absolute;
  left: 0; right: 0; bottom: 0;
  height: 2px;
  background: transparent;
  border-radius: 9999px;
  transform: scaleX(0);
  transform-origin: left center;
  transition: transform 0.2s ease, background-color 0.2s ease;
}

[data-sidebar-tabs] a[data-active="true"]::after,
.fd-sidebar-tabs a[data-active="true"]::after,
[data-sidebar-tabs] a[aria-current="page"]::after,
.fd-sidebar-tabs a[aria-current="page"]::after {
  background: var(--color-fd-primary);
  transform: scaleX(1);
}

/* =============== 统一文档标题颜色（不影响其他元素） =============== */
.prose :is(h1,h2,h3,h4,h5,h6),
.fd-article :is(h1,h2,h3,h4,h5,h6),
article :is(h1,h2,h3,h4,h5,h6) {
  color: var(--fd-foreground, #000) !important;
}

/* 确保标题中的锚点链接颜色与标题一致（不被全局链接色覆盖） */
.prose :is(h1,h2,h3,h4,h5,h6) a,
.fd-article :is(h1,h2,h3,h4,h5,h6) a,
article :is(h1,h2,h3,h4,h5,h6) a {
  color: inherit !important;
}

.prose :is(h1,h2,h3,h4,h5,h6) a:hover,
.fd-article :is(h1,h2,h3,h4,h5,h6) a:hover,
article :is(h1,h2,h3,h4,h5,h6) a:hover {
  color: inherit !important;
  opacity: 1;
}

/* === Back to Home Button Styles === */
.back-home-container {
  position: fixed;
  right: 24px;
  bottom: 24px;
  z-index: 9999; /* 确保高于任何内容/抽屉/对话框 */
  pointer-events: auto;
}

/* 按钮主体（作用域到 back-home-container，避免与其他 .button 样式冲突） */
.back-home-container .button {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background-color: var(--back-btn-bg);
  border: none;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0px 0px 0px 4px var(--back-btn-ring);
  cursor: pointer;
  transition-duration: 0.3s;
  overflow: hidden;
  position: relative;
}

/* 图标样式（作用域化） */
.back-home-container .svgIcon {
  width: 12px;
  transition-duration: 0.3s;
}

.back-home-container .svgIcon path { fill: var(--back-btn-text); }

/* 悬停时展开 */
.back-home-container .button:hover {
  width: 140px;
  border-radius: 50px;
  transition-duration: 0.3s;
  background-color: var(--back-btn-hover-bg);
  align-items: center;
}

.back-home-container .button:hover .svgIcon {
  transition-duration: 0.3s;
  transform: translateY(-200%);
}

/* 文案 */
.back-home-container .button::before {
  position: absolute;
  bottom: -20px;
  content: "返回首页";
  color: var(--back-btn-text);
  font-size: 0px;
}

.back-home-container .button:hover::before {
  font-size: 13px;
  opacity: 1;
  bottom: unset;
  transition-duration: 0.3s;
}

/* 目录切换（通用 TabList 适配）：无论 a 或 button，均显示底部蓝色条 */
[role="tablist"] > * { position: relative; padding-bottom: 6px; }
[role="tablist"] [aria-selected="true"]::after,
[role="tablist"] [data-active="true"]::after {
  content: '';
  position: absolute;
  left: 0; right: 0; bottom: 0;
  height: 2px;
  background: var(--color-fd-primary);
  border-radius: 9999px;
}

/* 恢复：侧边栏标签页激活态的蓝色指示条（使用主色） */
[data-sidebar-tabs] a,
.fd-sidebar-tabs a { position: relative; padding-bottom: 6px; }

[data-sidebar-tabs] a::after,
.fd-sidebar-tabs a::after {
  content: '';
  position: absolute;
  left: 0; right: 0; bottom: 0;
  height: 2px;
  background: transparent;
  border-radius: 9999px;
  transform: scaleX(0);
  transform-origin: left center;
  transition: transform 0.2s ease, background-color 0.2s ease;
}

[data-sidebar-tabs] a[data-active="true"]::after,
.fd-sidebar-tabs a[data-active="true"]::after,
[data-sidebar-tabs] a[aria-current="page"]::after,
.fd-sidebar-tabs a[aria-current="page"]::after {
  background: var(--color-fd-primary);
  transform: scaleX(1);
}

/* =============== 统一文档标题颜色（不影响其他元素） =============== */
.prose :is(h1,h2,h3,h4,h5,h6),
.fd-article :is(h1,h2,h3,h4,h5,h6),
article :is(h1,h2,h3,h4,h5,h6) {
  color: var(--fd-foreground, #000) !important;
}

/* 确保标题中的锚点链接颜色与标题一致（不被全局链接色覆盖） */
.prose :is(h1,h2,h3,h4,h5,h6) a,
.fd-article :is(h1,h2,h3,h4,h5,h6) a,
article :is(h1,h2,h3,h4,h5,h6) a {
  color: inherit !important;
}

.prose :is(h1,h2,h3,h4,h5,h6) a:hover,
.fd-article :is(h1,h2,h3,h4,h5,h6) a:hover,
article :is(h1,h2,h3,h4,h5,h6) a:hover {
  color: inherit !important;
  opacity: 1;
}

/* === Back to Home Button Styles === */
.back-home-container {
  position: fixed;
  right: 24px;
  bottom: 24px;
  z-index: 9999; /* 确保高于任何内容/抽屉/对话框 */
  pointer-events: auto;
}

/* 按钮主体（作用域到 back-home-container，避免与其他 .button 样式冲突） */
.back-home-container .button {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background-color: var(--back-btn-bg);
  border: none;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0px 0px 0px 4px var(--back-btn-ring);
  cursor: pointer;
  transition-duration: 0.3s;
  overflow: hidden;
  position: relative;
}

/* 图标样式（作用域化） */
.back-home-container .svgIcon {
  width: 12px;
  transition-duration: 0.3s;
}

.back-home-container .svgIcon path { fill: var(--back-btn-text); }

/* 悬停时展开 */
.back-home-container .button:hover {
  width: 140px;
  border-radius: 50px;
  transition-duration: 0.3s;
  background-color: var(--back-btn-hover-bg);
  align-items: center;
}

.back-home-container .button:hover .svgIcon {
  transition-duration: 0.3s;
  transform: translateY(-200%);
}

/* 文案 */
.back-home-container .button::before {
  position: absolute;
  bottom: -20px;
  content: "返回首页";
  color: var(--back-btn-text);
  font-size: 0px;
}

.back-home-container .button:hover::before {
  font-size: 13px;
  opacity: 1;
  bottom: unset;
  transition-duration: 0.3s;
}
